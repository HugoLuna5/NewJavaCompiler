.data 
VT_A_7: NOP             ; VT de la clase A 
.data 
VT_Object_4: NOP             ; VT de la clase Object 
.data 
VT_System_5: NOP             ; VT de la clase System 
.data 
VT_Principal_6: NOP             ; VT de la clase Principal 
.code 
                   PUSH simple_heap_init 
                   CALL            
                   PUSH met_main_35 
                   CALL            
                   HALT            
simple_heap_init: RET 0           ; Retorna inmediatamente 
simple_malloc: LOADFP          ; Inicialización unidad 
                   LOADSP          
                   STOREFP         ; Finaliza inicialización del RA 
                   LOADHL          ; hl 
                   DUP             ; hl 
                   PUSH 1          ; 1 
                   ADD             ; hl+1 
                   STORE 4         ; Guarda el resultado (un puntero a la primer celda de la región de memoria) 
                   LOAD 3          ; Carga la cantidad de celdas a alojar (parámetro que debe ser positivo) 
                   ADD             
                   STOREHL         ; Mueve el heap limit (hl). Expande el heap 
                   STOREFP         
                   RET 1           ; Retorna eliminando el parámetro 
.data 
mensaje_error_cast: DW "[Excepcion] Se produjo error al intentar castear",0 ; Mensaje para casteos erroneos 
.code 
error_cast: PUSH mensaje_error_cast ; Apilo msj de error 
                   SPRINT          
                   HALT            
met_A_37: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_Object_23: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_System_24: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printC_27: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   CPRINT          
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printS_29: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   SPRINT          
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_println_30: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   PRNLN           
                   STOREFP         ; Reestablece el contexto 
                   RET 0           ; Retorna de la llamada, liberando parametros 
met_printCln_32: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   CPRINT          
                   PRNLN           
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printSln_34: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   SPRINT          
                   PRNLN           
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_read_25: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   READ            
                   STORE 3         
                   STOREFP         ; Reestablece el contexto 
                   RET 0           ; Retorna de la llamada, liberando parametros 
met_printB_26: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   BPRINT          
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printIln_33: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   IPRINT          
                   PRNLN           
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printI_28: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   IPRINT          
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_printBln_31: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   LOAD 3          
                   BPRINT          
                   PRNLN           
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_Principal_36: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   STOREFP         ; Reestablece el contexto 
                   RET 1           ; Retorna de la llamada, liberando parametros 
met_main_35: LOADFP          ; Guardar enlace dinamico 
                   LOADSP          ; Inicializar el FP 
                   STOREFP         ;  
                   RMEM 2          ; Se declaran 2 variables locales. Reservo lugar. 
                   PUSH 0          ; Apilo NULL 
                   STORE 0         ; Guardo parametro/var local a 
                                   ; Comienzo del IF_38 
                   LOAD 0          ; Cargo parametro/var local a 
                   PUSH 0          ; Apilo NULL 
                   NE              
                   BF IF_L1_38     
.data 
str_39: DW "[ERROR]",0  ; Guardo un string 
.code 
                   PUSH str_39     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
                   JUMP IF_L2_38   
IF_L1_38: NOP             ;  
.data 
str_40: DW "[OK]",0     ; Guardo un string 
.code 
                   PUSH str_40     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
IF_L2_38: NOP             ;  
                                   ; Fin del IF_38 
                   LOAD 0          ; Cargo parametro/var local a 
                   STORE -1        ; Guardo parametro/var local b 
                                   ; Comienzo del IF_41 
                   LOAD -1         ; Cargo parametro/var local b 
                   PUSH 0          ; Apilo NULL 
                   EQ              
                   BF IF_L1_41     
.data 
str_42: DW "[OK]",0     ; Guardo un string 
.code 
                   PUSH str_42     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
                   JUMP IF_L2_41   
IF_L1_41: NOP             ;  
.data 
str_43: DW "[ERROR]",0  ; Guardo un string 
.code 
                   PUSH str_43     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
IF_L2_41: NOP             ;  
                                   ; Fin del IF_41 
                                   ; Comienzo del IF_44 
                   LOAD -1         ; Cargo parametro/var local b 
                   LOAD 0          ; Cargo parametro/var local a 
                   EQ              
                   BF IF_L1_44     
.data 
str_45: DW "[OK]",0     ; Guardo un string 
.code 
                   PUSH str_45     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
                   JUMP IF_L2_44   
IF_L1_44: NOP             ;  
.data 
str_46: DW "[ERROR]",0  ; Guardo un string 
.code 
                   PUSH str_46     ; Apilo un string 
                   PUSH met_printSln_34 ; Preparo para llamar al metodo System.printSln 
                   CALL            
IF_L2_44: NOP             ;  
                                   ; Fin del IF_44 
                   FMEM 2          ; Libero las variables locales declaradas dentro de mi bloque 
                   STOREFP         ; Reestablece el contexto 
                   RET 0           ; Retorna de la llamada, liberando parametros 
